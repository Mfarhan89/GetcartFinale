<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>GetCart Dashboard</title>
  <link rel="stylesheet" href="style.css">
  <script src="https://identity.netlify.com/v1/netlify-identity-widget.js"></script>

  <script>
    function logoutUser() {
      netlifyIdentity.logout();
    }

    netlifyIdentity.on("logout", () => {
      window.location.href = "index.html"; // redirect to login page
    });

    netlifyIdentity.on("init", user => {
      if (!user) {
        window.location.href = "index.html"; // kick back to login
      }
    });
  </script>
</head>
<body>
  <!-- Navbar -->
  <header class="navbar">
    <div class="nav-container">
      <div class="brand">
        <img src="picture/contents/getcartLogoV2.png" alt="Site Logo" class="logo">
        <h1>GetCart Dashboard</h1>
      </div>
      <button class="btn" onclick="netlifyIdentity.logout()">Logout</button>
    </div>
  </header>

  <div class="container">
    <!-- Controls: Search + Filter -->
    <section class="controls">
      <input type="text" id="searchBox" placeholder="🔍 Search products..." oninput="applyFilters()">
      <select id="filterCategory" onchange="applyFilters()">
        <option value="all">All Categories</option>
        <option value="technology">Technology</option>
        <option value="health">Health</option>
        <option value="sport">Sport</option>
        <option value="accessories">Accessories</option>
        <option value="cloth">Cloth</option>
      </select>
    </section>

    <!-- Add Product Form -->
    <section class="form-section">
      <h2>Add Product</h2>
      <input type="text" id="pname" placeholder="Product Name">
      <input type="text" id="pdesc" placeholder="Description">
      <input type="text" id="plink" placeholder="Affiliate Link">
      <input type="text" id="pimg" placeholder="Image URL">
      <select id="pcategory">
        <option value="technology">Technology</option>
        <option value="health">Health</option>
        <option value="sport">Sport</option>
        <option value="accessories">Accessories</option>
        <option value="cloth">Cloth</option>
      </select>
      <button class="btn primary" onclick="uploadProduct()">Upload</button>
    </section>

    <!-- My Products -->
    <section class="product-section">
      <h2>My Products</h2>
      <div id="productList" class="grid"></div>
    </section>
  </div>

  <!-- Edit Product Modal -->
  <div id="editModal" class="modal">
    <div class="modal-content">
      <h2>Edit Product</h2>
      <input type="text" id="editName" placeholder="Product Name">
      <input type="text" id="editDesc" placeholder="Description">
      <input type="text" id="editLink" placeholder="Affiliate Link">
      <input type="text" id="editImg" placeholder="Image URL">
      <select id="editCategory">
        <option value="technology">Technology</option>
        <option value="health">Health</option>
        <option value="sport">Sport</option>
        <option value="accessories">Accessories</option>
        <option value="cloth">Cloth</option>
      </select>
      <button class="btn primary" onclick="saveEdit()">Save Changes</button>
      <button class="btn" onclick="closeEdit()">Cancel</button>
    </div>
  </div>

<script src="app.js"></script>
<script>
  // Load admin version
  loadProducts(true);
</script>

</body>
</html>
